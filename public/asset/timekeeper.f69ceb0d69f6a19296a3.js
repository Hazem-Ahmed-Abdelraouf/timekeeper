!function(t){var e={};function r(s){if(e[s])return e[s].exports;var i=e[s]={i:s,l:!1,exports:{}};return t[s].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(s,i,function(e){return t[e]}.bind(null,i));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=1)}([function(t,e){t.exports={d:document,w:window,ga:window.ga||function(){console.log([].slice.call(arguments))},now:function(){return parseInt((new Date).valueOf()/1e3,10)},pad:function(t){return t=String(t||"").replace(/^0+/,"")||"0",parseInt(t,10)<10?"0"+t:""+t},q:function(t,e,r){return 1===r?t.querySelector(e):(r||(r=0),[][r?"filter":"slice"].call(t.querySelectorAll(e),r))}}},function(t,e,r){r(2);const{q:s}=r(0),i=(new(r(3))).attach(document.querySelector(".timer-app"));s(document,'a[href*="#set:"]',t=>{t.addEventListener("click",e=>{e.preventDefault(),i.start(parseInt(t.href.match(/set:(\d+)/)[1],10))})})},function(t,e,r){},function(t,e,r){const{d:s,w:i,ga:a,now:n,pad:o,q:l}=r(0),u=86400,h=3600,d=60;t.exports=class{constructor(){this.inputNames=["d","h","m","s"],this.tracked={}}attach(t){t.timeKeeper=this,this.baseUrl=t.action.replace(/\/+$/,""),this.formEl=t,this.getAlarmBtn().addEventListener("click",t=>{t.preventDefault(),localStorage.setItem("timer_alarm",this._renderAlarmLink(t))}),l(t,"a.set",t=>{t.addEventListener("click",t=>{t.preventDefault(),this.stop()})});const e=this;return this.formEl.addEventListener("submit",function(t){e._onSubmit(this,t)}),this.inputNames.forEach(r=>{t[r].addEventListener("blur",function(t){e._onBlur(this,t)}),t[r].addEventListener("focus",function(t){e._focus=!0}),t[r].addEventListener("keydown",function(t){e._onKeydown(this,t)})}),this.getAlarmPlayer().volume=.4,this._renderAlarmLink(),this._startOrStop({}),i.addEventListener("popstate",t=>this._startOrStop(t)),this}getAlarmBtn(){return l(this.formEl,'a[href$="#toggle/alarm"]',1)}getAlarmPlayer(){return l(this.formEl,".timer-app_sound",1)}getProgressbar(){return l(this.formEl,".timer-app_progressbar div",1)}start(t,e){if(!t)return this.stop();e||(e=n()),history.pushState({},s.title,[this.baseUrl,e,t].join("/")),this._startTimer()}stop(){history.pushState({},s.title,this.baseUrl),this._stopTimer()}_ga(t,e){this.tracked[t]||(a("send","event","timer",t,e),this.tracked[t]=!0)}_hideDays(t){l(this.formEl,".-days",e=>e.classList[t?"add":"remove"]("hide"))}_onBlur(t,e){t.value.length||(t.value="0"),"d"!=t.name&&(t.value=o(t.value)),localStorage.setItem("timer_"+t.name,t.value)}_onKeydown(t,e){if(e.altKey||e.ctrlKey||e.metaKey)return;if(t.disabled)return;const r=(e.keyCode||e.which)-48;if(r<-30||r<0||r>9)return;e.preventDefault();const s=t.getAttribute("max"),i=[this._focus,this._focus=!1][0];if(t.value.length>=s.length)return t.value=r;const a=parseInt((i?"":t.value)+""+r,10);t.value=a>s?s:a<0?"00":a}_onSubmit(t,e){e.preventDefault();var r=0;r+=parseInt(t.d.value.replace(/^0+/,"")||0,10)*u,r+=parseInt(t.h.value.replace(/^0+/,"")||0,10)*h,r+=parseInt(t.m.value.replace(/^0+/,"")||0,10)*d,r+=parseInt(t.s.value.replace(/^0+/,"")||0,10),this._submitted=!0,this.tracked.created=!1,this.tracked.expired=!1,this.start(r)}_renderAlarmLink(t){var e=localStorage.getItem("timer_alarm")||"off";t&&(e="on"==e?"off":"on");const r=this.getAlarmBtn().querySelector(".fas");return r.className=r.className.replace(/fa-\S+/,"on"==e?"fa-bell":"fa-bell-slash"),e}_renderCountdown(){var t=[0,0,0,this.ends-n()],e=[];if(this.getProgressbar().style.width=100-(this.seconds-t[3])/this.seconds*100+"%",t[3]<=0)return this.tid&&clearInterval(this.tid),setTimeout(()=>{this.getAlarmPlayer().pause()},4e3),"on"==localStorage.getItem("timer_alarm")&&this.getAlarmPlayer().play(),this.inputNames.forEach(t=>{this.formEl[t].value="d"==t?"0":"00"}),void this._state("expired");t[0]=parseInt(t[3]/u,10),t[3]-=t[0]*u,t[1]=parseInt(t[3]/h,10),t[3]-=t[1]*h,t[2]=parseInt(t[3]/d,10),t[3]-=t[2]*d;for(var r=0;r<t.length;r++)(t[r]||e.length)&&e.push(t[r]+this.inputNames[r]);s.title=e.join(" "),this.formEl.d.value=t[0],this.formEl.h.value=o(t[1]),this.formEl.m.value=o(t[2]),this.formEl.s.value=o(t[3]),this._hideDays(!t[0])}_renderExpired(){return this._state("expired"),this._hideDays(!0),this.inputNames.forEach(t=>{this.formEl[t].value="d"==t?"0":"00"}),this.seconds&&this._ga("expired",""+this.seconds),!0}_renderInputValues(){this._hideDays(!1),this.inputNames.forEach(t=>{this.formEl[t].value=localStorage.getItem("timer_"+t)||("d"==t?"0":"00")})}_startOrStop(){this._startTimer()||this._stopTimer()}_startTimer(){const t=location.href.match(/\/(\d+)\/(\d+)/);return!!t&&(this.tid&&clearInterval(this.tid),this._state("countdown"),l(this.formEl,"input",t=>{t.disabled=!0}),l(s,"a.set",1).focus(),this.seconds=parseInt(t[2],10),this.ends=parseInt(t[1],10)+this.seconds,this.ends-n()<=0?this._renderExpired():(this.tid=setInterval(()=>this._renderCountdown(),1e3),this._renderCountdown(),this._ga(this._submitted?"created":"visited",""+this.seconds),this._submitted=!1,!0))}_stopTimer(){this.tid&&clearInterval(this.tid),this._state("set"),this._renderInputValues(),l(this.formEl,"input",t=>{t.disabled=!1}),location.href.match(/\#about/)||this.formEl.m.focus()}_state(t){this.formEl.className=this.formEl.className.replace(/\s-\w+/," -"+t),l(this.formEl,".show-when",t=>t.classList.add("hide")),l(this.formEl,".show-when.-"+t,t=>t.classList.remove("hide"))}}}]);